(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{451:function(v,_,t){"use strict";t.r(_);var r=t(2),o=Object(r.a)({},(function(){var v=this,_=v._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h4",{attrs:{id:"什么是-点云-point-cloub-data"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#什么是-点云-point-cloub-data"}},[v._v("#")]),v._v(" 什么是 点云(Point Cloub Data) ？")]),v._v(" "),_("p",[_("strong",[v._v("点云是指目标表面特性的海量点集合。")])]),v._v(" "),_("p",[v._v("通过测量仪器得到的物体外观表面的点数据集合就称之为点云。")]),v._v(" "),_("blockquote",[_("p",[v._v("请注意：上面虽然使用的是 “物体表面”，但其实暗含的意思为 “物体空间表面”。")])]),v._v(" "),_("br"),v._v(" "),_("p",[_("strong",[v._v("PCD 格式标准是为了更好支持 PCL 库而诞生的。")])]),v._v(" "),_("p",[_("strong",[v._v("PCL库是什么？")])]),v._v(" "),_("p",[v._v("PCL(Point Cloud Library) 是一个大型跨平台开源的 C++ 编程库。该库实现了大量点云相关的通用算法和高效数据结构。涉及到点云获取、过滤、分割、配准、检索、特征提取、识别、追踪、曲面重建、可视化等。")]),v._v(" "),_("blockquote",[_("p",[v._v("关于 PCL 更多相关知识，可查看 PCL 官网 ：https://pointclouds.org/")])]),v._v(" "),_("br"),v._v(" "),_("p",[v._v("结合点云数据的一些特征，又产生了以下一些名词概念。")]),v._v(" "),_("br"),v._v(" "),_("p",[_("strong",[v._v("稀疏点云")])]),v._v(" "),_("p",[v._v("使用三维坐标测量机所得到的点数比较少，点与点的间距比较大，这类被称为 稀疏点云。")]),v._v(" "),_("blockquote",[_("p",[v._v("例如 AI 自动驾驶过程中，周边空间极大，所采集得到的点云数据，就是稀疏点云。")])]),v._v(" "),_("br"),v._v(" "),_("p",[_("strong",[v._v("密集点云")])]),v._v(" "),_("p",[v._v("使用三维激光扫描仪或相机式扫描仪得到的点云，点数量较大且比较密集，这类被称为 密集点云。")]),v._v(" "),_("blockquote",[_("p",[v._v("例如扫描出某个较小物体的 3D 全貌，多数都是 密集点云")])]),v._v(" "),_("br"),v._v(" "),_("p",[_("strong",[v._v("无序点云")])]),v._v(" "),_("p",[v._v("这里说的 “无序” 暗含 2 层意思：")]),v._v(" "),_("ol",[_("li",[v._v("点与点之间是不必是连续的。")]),v._v(" "),_("li",[v._v("某个点在 数据(Data) 中出现的先后顺序是无序、无所谓的。")])]),v._v(" "),_("blockquote",[_("p",[v._v("绝大多数时候，我们使用的 .pcd 都是无序点云")])]),v._v(" "),_("br"),v._v(" "),_("p",[_("strong",[v._v("有序点云")])]),v._v(" "),_("p",[v._v("所谓有序点云，意味着点云有类似图像或矩阵那样的结构，即数据分为行和列。")]),v._v(" "),_("blockquote",[_("p",[v._v("这种有序点云数据通常由立体摄像机和时间飞行摄像机采集而成的。")]),v._v(" "),_("p",[v._v("由于存在类似矩阵的结构，所以某个点在 数据(Data)中出现的先后顺序是有序的。")])]),v._v(" "),_("p",[v._v("有序点云的优势在于所有的点都有相邻的点，预先了解相邻点的信息，可以让邻域操作更加高效，加速计算并降低 PCL 中某些算法的成本。")]),v._v(" "),_("br"),v._v(" "),_("hr"),v._v(" "),_("br"),v._v(" "),_("h4",{attrs:{id:"点云中每个点存储的数据内容是什么"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#点云中每个点存储的数据内容是什么"}},[v._v("#")]),v._v(" 点云中每个点存储的数据内容是什么？")]),v._v(" "),_("p",[_("strong",[v._v("空间坐标(x,y,z) + [激光反射强度Intensity] + [颜色信息RGB]")])]),v._v(" "),_("blockquote",[_("p",[v._v("空间坐标(x,y,z) 是必须项")]),v._v(" "),_("p",[v._v("激光反射强度(Intensity) 和 颜色信息(RGB) 是选填项")])]),v._v(" "),_("br"),v._v(" "),_("blockquote",[_("p",[v._v("每个点必须包含空间坐标(x,y,z) 这个无需多言，选填项是由测量工具决定的。")])]),v._v(" "),_("p",[_("strong",[v._v("测量工具决定了除空间外的其他存储信息")])]),v._v(" "),_("br"),v._v(" "),_("p",[_("strong",[v._v("以智能汽车为例，来说明测量工具的差异")])]),v._v(" "),_("blockquote",[_("p",[v._v("该知识点来源于抖音上 "),_("code",[v._v("李永乐老师")]),v._v(" 的 “智能汽车如何眼观六路耳听八方” 相关视频。")])]),v._v(" "),_("p",[v._v("智能汽车若想实现自动驾驶，那核心有一个环节，就是需要在行驶过程中不断测量周围物体与自己的距离。")]),v._v(" "),_("p",[v._v("目前市面上的智能汽车都配备以下 3 种测量工具：")]),v._v(" "),_("ol",[_("li",[v._v("激光雷达")]),v._v(" "),_("li",[v._v("毫米波雷达")]),v._v(" "),_("li",[v._v("摄像头")])]),v._v(" "),_("br"),v._v(" "),_("p",[v._v("这 3 种测量工具的差异之处为：")]),v._v(" "),_("table",[_("thead",[_("tr",[_("th"),v._v(" "),_("th",[v._v("激光雷达")]),v._v(" "),_("th",[v._v("毫米波雷达")]),v._v(" "),_("th",[v._v("摄像头")])])]),v._v(" "),_("tbody",[_("tr",[_("td",[v._v("是否定位精准？")]),v._v(" "),_("td",[v._v("是")]),v._v(" "),_("td",[v._v("是")]),v._v(" "),_("td",[v._v("否")])]),v._v(" "),_("tr",[_("td",[v._v("是否夜晚可用？")]),v._v(" "),_("td",[v._v("是")]),v._v(" "),_("td",[v._v("是")]),v._v(" "),_("td",[v._v("否")])]),v._v(" "),_("tr",[_("td",[v._v("是否可以3D建模？")]),v._v(" "),_("td",[v._v("是")]),v._v(" "),_("td",[v._v("否")]),v._v(" "),_("td",[v._v("否")])]),v._v(" "),_("tr",[_("td",[v._v("是否可以在雨雪天气下使用？")]),v._v(" "),_("td",[v._v("否")]),v._v(" "),_("td",[v._v("是")]),v._v(" "),_("td",[v._v("否")])]),v._v(" "),_("tr",[_("td",[v._v("是否可以识别颜色？")]),v._v(" "),_("td",[v._v("否")]),v._v(" "),_("td",[v._v("否")]),v._v(" "),_("td",[v._v("是")])])])]),v._v(" "),_("blockquote",[_("p",[v._v("激光雷达工作原理是：自己发射出一道激光，遇到障碍物反射回来，通过计算发射和接收返回激光的时间来判定距离。\n由于是自己发出的激光，并不需要外界光，所以即使在夜晚激光雷达也可以正常工作。")])]),v._v(" "),_("blockquote",[_("p",[v._v("毫米波雷达发射的光，波长比较长，利于传播，不易被雨雪影响，所以在雨雪天气中也可以正常工作。")])]),v._v(" "),_("blockquote",[_("p",[v._v("摄像头主要作用是用来判断颜色。在比较近的距离，例如二目摄像头是可以做定位的，只不过精准度不高，可以被忽略。")])]),v._v(" "),_("br"),v._v(" "),_("p",[v._v("从上面表格可以看出，3 种测量工具各有优缺点，只有同时将 3 种测量工具得到的数据综合一下，才可以得到完整的周边空间信息。")]),v._v(" "),_("br"),v._v(" "),_("p",[v._v("回到我们刚才提到的问题：点云中每个点存储的数据内容是什么？")]),v._v(" "),_("ol",[_("li",[_("p",[v._v("若使用激光原理得到的点云，每个点除空间坐标(x,y,z)外，还包含激光反射强度(Intensity)")])]),v._v(" "),_("li",[_("p",[v._v("若使用摄像头原理得到的点云，每个点除空间坐标(x,y,x)外，还包含颜色信息(RGB)")]),v._v(" "),_("blockquote",[_("p",[v._v("对于很多 3D 扫描仪来说，能够在近距离对物体扫描得出 3D 模型，包括物体颜色。实际上是摄像头加其他测量工具综合得到的数据结果。")])])]),v._v(" "),_("li",[_("p",[v._v("若使用激光原理 + 摄像头原理得到的点云，每个点除空间(x,y,z)外，还可以同时包含激光反射强度(Intensity) 和 颜色信息(RGB)。")])])]),v._v(" "),_("br"),v._v(" "),_("hr"),v._v(" "),_("br"),v._v(" "),_("h4",{attrs:{id:"点云数据的数据格式是什么"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#点云数据的数据格式是什么"}},[v._v("#")]),v._v(" 点云数据的数据格式是什么？")]),v._v(" "),_("p",[_("strong",[v._v("目前最主流的点云数据(Point Cloud Data)格式为 .pcd，遵循点云库(Point Cloud Library)标准。")])]),v._v(" "),_("p",[v._v("2020年正式版本为 PCD 0.7，相对于 0.6 版，在头部新增了 VIEWPOINT 字段，用来指定传感器对于数据集方向的信息。")]),v._v(" "),_("br"),v._v(" "),_("p",[_("strong",[v._v("文件格式后缀")])]),v._v(" "),_("p",[v._v("PCD 标准规范文件对应的文件后缀为 .pcd。")]),v._v(" "),_("p",[v._v("目前 .pcd 是对 PCL 库支持度最好的文件标准格式。")]),v._v(" "),_("blockquote",[_("p",[v._v("除了 .pcd 以外，不同 3D 扫描厂商还有自家定义的后缀格式，例如 .ply、.ifs、.vtk、.stl、.obj、.x3d 等。")]),v._v(" "),_("p",[v._v("但无论哪种后缀格式，点云数据内容规范相似，区别在于对 PCL 库的支持度不同。")])]),v._v(" "),_("blockquote",[_("p",[v._v("文件后缀仅仅是一种表达文件格式规范的外在形式，只要文件实际内容遵循 点云 PCD 标准，哪怕文件后缀使用 .xyz 也是可以的。")])]),v._v(" "),_("br"),v._v(" "),_("p",[_("strong",[v._v("文件结构")])]),v._v(" "),_("blockquote",[_("p",[v._v("文件后缀是什么不重要，但文件结构一定要遵循 PCD 标准规范。")])]),v._v(" "),_("p",[v._v("一个 .pcd 文件内容包含 2 部分：头部信息(Header)、数据(Data)")]),v._v(" "),_("ol",[_("li",[_("p",[v._v("头部信息(Header)内容有若干字段组成，必须是 ASCII 编码。")]),v._v(" "),_("blockquote",[_("p",[v._v("ASCII 编码就是普通文本编码，是我们人类可以直接阅读的文字内容")])])]),v._v(" "),_("li",[_("p",[v._v("数据(Data)，即点云存储的每个点的信息总集合，可以是 ASCII 编码，也可以是二进制编码，也可以是压缩二进制编码。")])])]),v._v(" "),_("br"),v._v(" "),_("p",[_("strong",[v._v("在很多文章中，会把 数据(Data) 称为 “点云数据集”")])]),v._v(" "),_("blockquote",[_("p",[v._v("在本文用词中，我有时使用 "),_("code",[v._v("数据(Data)")]),v._v("，有时使用 "),_("code",[v._v("点云数据集")]),v._v("，请你理解 他们 2 者所指的对象是相同的。")])]),v._v(" "),_("br"),v._v(" "),_("blockquote",[_("p",[v._v("假设现在有一个 .pcd 文件，你可以选择使用记事本方式打开它，可以看到 头部信息(Header)，至于数据(Data)部分有可能就出现无法直接阅读的乱码。")])]),v._v(" "),_("br"),v._v(" "),_("p",[_("strong",[v._v("头部信息(Header)规范")])]),v._v(" "),_("p",[v._v("假设我们用记事本打开一个 .pcd 文件，可以看到头部信息(Header) 如下：")]),v._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[v._v("# .PCD v0.7 - Point Cloud Data file format\nVERSION 0.7\nFIELDS x y z\nSIZE 4 4 4\nTYPE F F F\nCOUNT 1 1 1\nWIDTH 59750\nHEIGHT 1\nVIEWPOINT 0 0 0 1 0 0 0\nPOINTS 59750\nDATA binary\n.......\n.......\n")])])]),_("br"),v._v(" "),_("p",[v._v("下面针对 头部信息(Header) 字段进行解释说明。")]),v._v(" "),_("table",[_("thead",[_("tr",[_("th",[v._v("字段")]),v._v(" "),_("th",[v._v("含义")]),v._v(" "),_("th",[v._v("补充说明")])])]),v._v(" "),_("tbody",[_("tr",[_("td",[v._v("#")]),v._v(" "),_("td",[v._v("注释")]),v._v(" "),_("td",[v._v("简单表明文件遵循的标准和版本")])]),v._v(" "),_("tr",[_("td",[v._v("VERSION")]),v._v(" "),_("td",[v._v("PCD版本")]),v._v(" "),_("td",[v._v("目前最新标准版本为 0.7")])]),v._v(" "),_("tr",[_("td",[v._v("FIELDS")]),v._v(" "),_("td",[v._v("每个点所包含的N个维度信息")]),v._v(" "),_("td",[v._v("x y z [intensity] [rgb]"),_("br"),v._v("xyz 为点的空间坐标"),_("br"),v._v("intensity 为激光反射强度"),_("br"),v._v("rbg 为颜色信息"),_("br"),v._v("timestamp为时间戳")])]),v._v(" "),_("tr",[_("td",[v._v("SIZE")]),v._v(" "),_("td",[v._v("用字节数指定每个维度的大小")]),v._v(" "),_("td",[v._v("unsigned char：占1个字节"),_("br"),v._v("unsigned short：占2个字节"),_("br"),v._v("unsigned int/float：占4个字节"),_("br"),v._v("double：占8个字节")])]),v._v(" "),_("tr",[_("td",[v._v("TYPE")]),v._v(" "),_("td",[v._v("用字符指定每个维度的类型")]),v._v(" "),_("td",[v._v("I：int8(char)、int16(short)、int32(int)"),_("br"),v._v("U：uint8(unsigned char)、uint16(unsigned short)、uint32(unsigned int)"),_("br"),v._v("F：float")])]),v._v(" "),_("tr",[_("td",[v._v("COUNT")]),v._v(" "),_("td",[v._v("每个维度包含的元素数量")]),v._v(" "),_("td",[v._v("默认为1，但是也有例外，例如 VFH 特征就是 308 个")])]),v._v(" "),_("tr",[_("td",[v._v("WIDTH")]),v._v(" "),_("td",[v._v("用点的数量表示点云数据集的宽度")]),v._v(" "),_("td",[v._v("对于无序点云数据集，WIDTH 表示点的总个数"),_("br"),v._v("对于有序点云数据集，WIDTH 表示矩阵每行有多少个点")])]),v._v(" "),_("tr",[_("td",[v._v("HEIGHT")]),v._v(" "),_("td",[v._v("用点的数量表示点云数据集的高度")]),v._v(" "),_("td",[v._v("对于无序点云数据集，HEIGHT 的值为 1"),_("br"),v._v("对于有序点云数据集，HEIGHT 表示矩阵每列有多少个点"),_("br"),v._v("实际中就是根据 HEIGHT 的值是否为 1 来判定当前点云是有序点云还是无序点云。")])]),v._v(" "),_("tr",[_("td",[v._v("VIEWPOINT")]),v._v(" "),_("td",[v._v("指定数据集中点云的获取视点")]),v._v(" "),_("td",[v._v("视点信息由 7 个数字组成"),_("br"),v._v("前 3 个数字对应：平移(tx,ty,tz)"),_("br"),v._v("后 4 个数字对应：四元素(qw,qx,qy,qz)"),_("br"),v._v("默认值为：0 0 0 1 0 0 0")])]),v._v(" "),_("tr",[_("td",[v._v("POINTS")]),v._v(" "),_("td",[v._v("指定点云中点的总数")]),v._v(" "),_("td",[v._v("从 PCD 0.7 版开始，该值就显得多余了，"),_("br"),v._v("因此可能会在未来版本中将其移除。")])]),v._v(" "),_("tr",[_("td",[v._v("DATA")]),v._v(" "),_("td",[v._v("指定存储点云数据集的类型")]),v._v(" "),_("td",[v._v("有 3 种类型："),_("br"),v._v("ascii：普通文本类型"),_("br"),v._v("binary：二进制类型"),_("br"),v._v("binary_compressed：压缩的二进制类型")])])])]),v._v(" "),_("br"),v._v(" "),_("p",[_("strong",[v._v("某个点的信息的补充说明：")])]),v._v(" "),_("p",[v._v("假设某个点是一个无效点，我们可以将该点的值设置为 nan")]),v._v(" "),_("blockquote",[_("p",[v._v("注意：要使用小写的 “nan”，不可以使用大写 “NAN”")])]),v._v(" "),_("br"),v._v(" "),_("p",[_("strong",[v._v("点云数据集存储类型的补充说明：")])]),v._v(" "),_("ol",[_("li",[v._v("ascli：一个点占一行，点信息的不同维度使用空格或tab键分隔")]),v._v(" "),_("li",[v._v("binary：标准的二进制存储方式")])]),v._v(" "),_("br"),v._v(" "),_("hr"),v._v(" "),_("br"),v._v(" "),_("h4",{attrs:{id:"基于-web-读取点云数据"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#基于-web-读取点云数据"}},[v._v("#")]),v._v(" 基于 Web 读取点云数据")]),v._v(" "),_("ol",[_("li",[v._v("需要加载、读取、解析 .pcd 文件")]),v._v(" "),_("li",[v._v("需要将得到的点云数据基于 WebGL 渲染到 画布(canvas) 中")])]),v._v(" "),_("p",[v._v("目前满足以上 2 点要求的，首先想到的是 Three.js 了。")]),v._v(" "),_("br"),v._v(" "),_("p",[_("strong",[v._v("为什么首选 Three.js ？")])]),v._v(" "),_("p",[v._v("因为 Three.js 满足以下几点：")]),v._v(" "),_("ol",[_("li",[v._v("基于 WebGL")]),v._v(" "),_("li",[v._v("包含 点(Point) 这个几何体")]),v._v(" "),_("li",[v._v("包含 .pcd 文件加载解析器 PCDLoader")])]),v._v(" "),_("blockquote",[_("p",[v._v("要想了解更多，可查阅 Three.js 官方文档中 PCDLoader 的介绍页")]),v._v(" "),_("p",[v._v("https://threejs.org/docs/index.html#examples/zh/loaders/PCDLoader")])]),v._v(" "),_("hr"),v._v(" "),_("br")])}),[],!1,null,null,null);_.default=o.exports}}]);